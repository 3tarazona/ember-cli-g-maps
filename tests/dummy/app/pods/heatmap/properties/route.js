import Ember from 'ember';

const { computed } = Ember;
let markers;
let newGradient;

export default Ember.Route.extend({
  setupController(controller) {
    controller.setProperties({
      lat: 33.524796085610056,
      lng: -86.81121826171875,
      zoom: 11,
      heatmapMarkers: Ember.A(markers),
      heatmapRadius: computed('inputHeatmapRadius', function() {
        return parseInt(this.get('inputHeatmapRadius'), 10);
      }),
      heatmapDissipating: true,
      heatmapOpacity: computed('inputHeatmapOpacity', function() {
        const opacity = (parseFloat(this.get('inputHeatmapOpacity')) / 100).toFixed(1);
        return (opacity > 1 ? 1 : (opacity < 0 ? 0 : opacity));
      }),
      heatmapGradient: null,
      heatmapVisible: true,

      inputHeatmapRadius: 10,
      inputHeatmapOpacity: 70
    });
  },

  actions: {
    toggleDissipate() {
      const heatmapDissipating = this.controller.get('heatmapDissipating');
      this.controller.set('heatmapDissipating', !heatmapDissipating);
    },

    toggleGradient() {
      const gradient = this.controller.get('heatmapGradient');
      if (gradient) {
        this.controller.set('heatmapGradient', null);
      } else {
        this.controller.set('heatmapGradient', newGradient);
      }
    },

    toggleVisibility() {
      const visible = this.controller.get('heatmapVisible');
      this.controller.set('heatmapVisible', !visible);
    }
  }
});

newGradient = [
  'rgba(0, 255, 255, 0)',
  'rgba(0, 255, 255, 1)',
  'rgba(0, 191, 255, 1)',
  'rgba(0, 127, 255, 1)',
  'rgba(0, 63, 255, 1)',
  'rgba(0, 0, 255, 1)',
  'rgba(0, 0, 223, 1)',
  'rgba(0, 0, 191, 1)',
  'rgba(0, 0, 159, 1)',
  'rgba(0, 0, 127, 1)',
  'rgba(63, 0, 91, 1)',
  'rgba(127, 0, 63, 1)',
  'rgba(191, 0, 31, 1)',
  'rgba(255, 0, 0, 1)'
];

markers = [[34.46736312818063,-86.89842224121094],
[34.42128370621833,-86.89807891845703],
[34.377091562115325,-86.89258575439453],
[34.33571111191177,-86.89464569091797],
[34.33365572840336,-86.89842224121094],
[34.31097229093081,-86.90254211425781],
[34.2916865491489,-86.91078186035156],
[34.280339926693784,-86.89979553222656],
[34.25650703347772,-86.89430236816406],
[34.23493812022694,-86.88194274902344],
[34.21222803035011,-86.87507629394531],
[34.18610385894349,-86.87782287597656],
[34.1690619954087,-86.87507629394531],
[34.15542602666279,-86.86958312988281],
[34.13724130951865,-86.86958312988281],
[34.054579443166894,-86.86649322509766],
[34.069369264143276,-86.86649322509766],
[34.018731867149164,-86.8685531616211],
[34.00165626925457,-86.86168670654297],
[33.989701307774936,-86.8582534790039],
[33.974897596387,-86.86237335205078],
[33.962369365505936,-86.86717987060547],
[33.95325676574604,-86.87061309814453],
[33.937877040654435,-86.86992645263672],
[33.924203841245316,-86.86649322509766],
[33.905969494326506,-86.8630599975586],
[33.892861147735054,-86.85344696044922],
[33.88773124619451,-86.85001373291016],
[33.87690044094308,-86.83902740478516],
[33.86036656143983,-86.8301010131836],
[33.84725120778971,-86.82735443115234],
[33.831281972437374,-86.8252944946289],
[33.818732622911796,-86.8246078491211],
[33.807322525222,-86.82392120361328],
[33.791345831951716,-86.8246078491211],
[33.774224637251095,-86.82735443115234],
[33.75767089591356,-86.82872772216797],
[33.74511075245788,-86.82804107666016],
[33.731406679641914,-86.8246078491211],
[33.71998494683795,-86.82598114013672],
[33.711988829552816,-86.83422088623047],
[33.702278257490676,-86.83490753173828],
[33.68913867735784,-86.82941436767578],
[33.67485424630674,-86.82872772216797],
[33.662281983854726,-86.8301010131836],
[33.64570664867635,-86.82804107666016],
[33.631415004631435,-86.82323455810547],
[33.620551768940985,-86.81705474853516],
[33.60968716357708,-86.81087493896484],
[33.592529735388204,-86.80538177490234],
[33.58337771130756,-86.8081283569336],
[33.5759409769364,-86.81499481201172],
[33.56850360178039,-86.82254791259766],
[33.56163776372238,-86.82735443115234],
[33.557060235080755,-86.8301010131836],
[33.54962123363222,-86.8301010131836],
[33.538747694711596,-86.82598114013672],
[33.525189623385955,-86.8278694152832],
[33.52175505150452,-86.82649612426758],
[33.51746164485582,-86.82477951049805],
[33.52204127103738,-86.82443618774414],
[33.51975148825449,-86.82065963745117],
[33.52061016390161,-86.81619644165039],
[33.521468831024514,-86.81241989135742],
[33.523758568344256,-86.80967330932617],
[33.52547583155271,-86.80692672729492],
[33.52833786112359,-86.80452346801758],
[33.530627416579115,-86.80177688598633],
[33.53291691140912,-86.79937362670898],
[33.54092966585865,-86.7890739440918],
[33.54922780706816,-86.77602767944336],
[33.547797149915816,-86.76950454711914],
[33.5452219073486,-86.76092147827148],
[33.544649620800165,-86.75371170043945],
[33.54693874425423,-86.74993515014648],
[33.520896387223026,-86.82821273803711],
[33.520896387223026,-86.83404922485352],
[33.52061016390161,-86.84125900268555],
[33.52118260959734,-86.8494987487793],
[33.520896387223026,-86.8553352355957],
[33.51774787859551,-86.86254501342773],
[33.51459925536968,-86.86941146850586],
[33.509160454437335,-86.88108444213867],
[33.518320343233604,-86.82477951049805],
[33.51345427305764,-86.82306289672852],
[33.50973297589764,-86.82031631469727],
[33.50486642274814,-86.81722640991211],
[33.50057217800356,-86.81344985961914],
[33.49484618694812,-86.8168830871582],
[33.491410410532566,-86.82100296020508],
[33.48654282724473,-86.82546615600586],
[33.48138861733215,-86.82683944702148],
[33.476234100726614,-86.82855606079102],
[33.47251120356604,-86.82855606079102],
[33.465637742433245,-86.82649612426758],
[33.46248722390272,-86.82271957397461]];